{% set blFirstTab = true %}

{% block details_tabs_longdescription %}
    {% hasrights { "ident": "SHOWLONGDESCRIPTION",} %}
        {% set oLongdesc = oDetailsProduct.getLongDescription() %}
        {% if oLongdesc.value %}
            {% capture append = "tabs" %}<a href="#description" data-toggle="tab">{{ translate({ ident: "DESCRIPTION" }) }}</a>{% endcapture %}
            {% capture append = "tabsContent" %}
                <div id="description" class="tab-pane{% if blFirstTab %} active{% endif %}" itemprop="description">
                    {{ include(template_from_string(oLongdesc)) }}
                    {% if oDetailsProduct.oxarticles__oxexturl.value %}
                        <a id="productExturl" class="js-external" href="http://{{ oDetailsProduct.oxarticles__oxexturl.value }}">
                        {% if oDetailsProduct.oxarticles__oxurldesc.value %}
                            {{ oDetailsProduct.oxarticles__oxurldesc.value }}
                        {% else %}
                            {{ oDetailsProduct.oxarticles__oxexturl.value }}
                        {% endif %}
                        </a>
                    {% endif %}
                </div>
            {% endcapture %}
            {% set blFirstTab = false %}
        {% endif %}
    {% endhasrights %}
{% endblock %}

{% block details_tabs_attributes %}
    {% if oView.getAttributes() %}
        {% capture append = "tabs" %}<a href="#attributes" data-toggle="tab">{{ translate({ ident: "SPECIFICATION" }) }}</a>{% endcapture %}
        {% capture append = "tabsContent" %}
            <div id="attributes" class="tab-pane{% if blFirstTab %} active{% endif %}">{% include "page/details/inc/attributes.html.twig" %}</div>
            {% set blFirstTab = false %}
        {% endcapture %}
    {% endif %}
{% endblock %}

{% block details_tabs_pricealarm %}
    {% if oView.isPriceAlarm() and not oDetailsProduct.isParentNotBuyable() %}
        {% capture append = "tabs" %}<a href="#pricealarm" data-toggle="tab">{{ translate({ ident: "PRICE_ALERT" }) }}</a>{% endcapture %}
        {% capture append = "tabsContent" %}
            <div id="pricealarm" class="tab-pane{% if blFirstTab %} active{% endif %}">{% include "form/pricealarm.html.twig" %}</div>
            {% set blFirstTab = false %}
        {% endcapture %}
    {% endif %}
{% endblock %}

{% block details_tabs_tags %}
{% endblock %}

{% block details_tabs_media %}
    {% if oView.getMediaFiles() or oDetailsProduct.oxarticles__oxfile.value %}
        {% capture append = "tabs" %}<a href="#media" data-toggle="tab">{{ translate({ ident: "MEDIA" }) }}</a>{% endcapture %}
        {% capture append = "tabsContent" %}
            <div id="media" class="tab-pane{% if blFirstTab %} active{% endif %}">{% include "page/details/inc/media.html.twig" %}</div>
            {% set blFirstTab = false %}
        {% endcapture %}
    {% endif %}
{% endblock %}

{% block details_tabs_comments %}
{% endblock %}

{% block details_tabs_invite %}
{% endblock %}

{% block details_tabs_main %}
    {% if tabs %}
        <div class="tabbedWidgetBox clear">
            <ul id="itemTabs" class="nav nav-tabs">
                {% for tab in tabs %}
                    <li{% if smarty.foreach.tabs.first %} class="active"{% endif %}>{{ tab }}</li>
                {% endfor %}
                {% block details_tabs_social_navigation %}{% endblock %}
            </ul>
            <div class="tab-content">
                {% for tabContent in tabsContent %}
                    {{ tabContent }}
                {% endfor %}
                {% block details_tabs_social_content %}{% endblock %}
            </div>
        </div>
    {% endif %}
{% endblock %}

